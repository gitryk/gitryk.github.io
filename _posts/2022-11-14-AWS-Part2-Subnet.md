---
title: AWS Infra / Part2. Subnet
date: 2022-11-14 15:10:00 +0900
categories: [AWS, 2Tier 아키텍쳐 구축]
tags: [AWS, Subnet]     # TAG names should always be lowercase
typora-root-url: ../
---
# Intro

[저번 글](/posts/AWS-Part1-VPC/)에서는 네트워크의 기반이 될 VPC를 생성 하였습니다.

이번에는 작업 용도별로 나눌 서브넷을 생성 하는 파트 입니다.

<br>

# Subnet이란?

> *서브넷*은 VPC의 IP 주소 범위입니다. 지정된 서브넷으로 AWS 리소스를 시작할 수 있습니다. 인터넷에 연결되어야 하는 리소스에는 퍼블릭 서브넷을 사용하고, 인터넷에 연결되지 않는 리소스에는 프라이빗 서브넷을 사용하십시오. - *AWS Document*

서브넷은 간단히 말하면 작업용도가 정해진 "방(Room)"을 생성하는 것 입니다. 

사용자가 용도별로 방을 만들고, 거기에 맞는 접근방식을 선택(Public, Private)하고 각 요소를 배치할 수 있습니다.

이번 파트에서는 각 AZ(가용영역) 마다 서브넷을 생성 할 것 입니다.

<br>

# AZ(Availability Zone)란?

> *AZ(가용 영역)*는 AWS 리전의 중복 전력, 네트워킹 및 연결이 제공되는 하나 이상의 개별 데이터 센터로 구성됩니다. AZ를 사용하면 단일 데이터 센터를 사용하는 것보다 더 높은 가용성, 내결함성 및 확장성을 갖춘 프로덕션 애플리케이션과 데이터베이스를 운영할 수 있습니다. 

AZ는 리전의 하위 영역으로써, 하나의 AZ가 하나의 데이터센터라고 이해하시면 편합니다.

서울 리전에는 2a~2d의 4개의 가용영역이 존재합니다.

<br>

앞서 땅과 건물에 비유를 했기 때문에 맞춰서 설명한다면

저희가 만든 토지에 같은 기능을 하는 건물이 여러채 있다고 생각하시면 됩니다.

만약 원래 이용하던 건물이 갑작스럽게 이용이 불가능하게 되더라도 옆 건물이 같은 서비스를 제공하니

그곳을 이용하면 되는 것 입니다.

<br>

위의 비유와 같이, 실제 사례에서는 만약 AWS의 데이터 센터 하나에서 사고가 발생해서 서비스가 불가하더라도,

다른 데이터센터의 가용영역에 같은 서비스를 생성하였기 때문에, 안정적인 서비스가 가능해집니다.

물론 사고때가 아니더라도 서비스 트래픽을 분산 할 수 있다는 장점도 있습니다.

<br>

# 실전

## Subnet 생성

![01](/assets/post/2022-11-14-AWS-Part2-Subnet/01.png)

VPC 대쉬보드에서 서브넷을 선택 합니다.

<br>

![02](/assets/post/2022-11-14-AWS-Part2-Subnet/02.png)

서브넷 생성을 클릭합니다.

<br>

![03](/assets/post/2022-11-14-AWS-Part2-Subnet/03.png)

앞서 만든 VPC가 VPC ID에 표시 됩니다. 

여러개의 VPC가 있는경우 확인을 잘 하고 선택 하면 됩니다.

<br>

![04](/assets/post/2022-11-14-AWS-Part2-Subnet/04.png)

서브넷의 이름과 가용영역, CIDR 블록을 지정할 수 있습니다.

하단의 **새 서브넷 추가**를 눌러 한 번에 여러개의 서브넷을 생성 할 수 있습니다.

생성 할 서브넷을 모두 작성하였다면 하단의 **서브넷 생성**버튼을 누르면 됩니다.

이번에는 아래의 표와 같이 서브넷을 생성 합니다.

<br>

|  서브넷 이름   | 서브넷 가용영역 |  서브넷 CIDR   |
| :------------: | :-------------: | :------------: |
|  2a-PubSubNet  | ap-northeast-2a | 172.31.10.0/24 |
| 2a-PrivSubNet  | ap-northeast-2c | 172.31.11.0/24 |
|  2a-DBSubNet   | ap-northeast-2a | 172.31.12.0/24 |
| 2a-RedisSubNet | ap-northeast-2c | 172.31.13.0/24 |
|  2c-PubSubNet  | ap-northeast-2a | 172.31.20.0/24 |
| 2c-PrivSubNet  | ap-northeast-2c | 172.31.21.0/24 |
|  2c-DBSubNet   | ap-northeast-2a | 172.31.22.0/24 |
| 2c-RedisSubNet | ap-northeast-2c | 172.31.23.0/24 |

가용영역은 2a와 2c로 생성 하였습니다.

**AWS의 프리티어** 적용 머신인 **t2.micro를 지원**하는 가용영역 입니다.

<br>

## 결과 확인

![05](/assets/post/2022-11-14-AWS-Part2-Subnet/05.png)

생성이 완료 되면 위와 같이 서브넷 내역을 확인 할 수 있습니다.

<br>

![06](/assets/post/2022-11-14-AWS-Part2-Subnet/06.png)

<br>

# Outro

이번 과정으로 위와 같이 서브넷 영역도 생성 되었습니다. 

실제론 Public/Private 구분이 없는 상태 입니다. 파트를 진행하며 구분이 될 예정입니다.

[다음 파트는 인터넷 게이트웨이(IGW) 생성](/posts/AWS-Part3-IGW/) 입니다.